<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Visualization - mlr tutorial</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/custom_mlr.css" rel="stylesheet">
        <link href="../css/custom_highlight.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../index.html">mlr tutorial</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../index.html">Home</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Quick Walkthrough <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../task/index.html">Tasks</a>
</li>
                            
<li >
    <a href="../learner/index.html">Learners</a>
</li>
                            
<li >
    <a href="../train/index.html">Train</a>
</li>
                            
<li >
    <a href="../predict/index.html">Predict</a>
</li>
                            
<li >
    <a href="../preproc/index.html">Preprocessing</a>
</li>
                            
<li >
    <a href="../performance/index.html">Performance</a>
</li>
                            
<li >
    <a href="../resample/index.html">Resampling</a>
</li>
                            
<li >
    <a href="../tune/index.html">Tuning</a>
</li>
                            
<li >
    <a href="../benchmark_experiments/index.html">Benchmark Experiments</a>
</li>
                            
<li >
    <a href="../parallelization/index.html">Parallelization</a>
</li>
                            
<li class="active">
    <a href="index.html">Visualization</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Advanced <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../configureMlr/index.html">Configuration</a>
</li>
                            
<li >
    <a href="../wrapper/index.html">Wrapped Learners</a>
</li>
                            
<li >
    <a href="../impute/index.html">Imputation</a>
</li>
                            
<li >
    <a href="../bagging/index.html">Bagging</a>
</li>
                            
<li >
    <a href="../advanced_tune/index.html">Advanced Tuning</a>
</li>
                            
<li >
    <a href="../feature_selection/index.html">Feature Selection</a>
</li>
                            
<li >
    <a href="../nested_resampling/index.html">Nested Resampling</a>
</li>
                            
<li >
    <a href="../cost_sensitive_classif/index.html">Cost-Sensitive Classification</a>
</li>
                            
<li >
    <a href="../over_and_undersampling/index.html">Imbalanced Classification Problems</a>
</li>
                            
<li >
    <a href="../roc_analysis/index.html">ROC Analysis</a>
</li>
                            
<li >
    <a href="../multilabel/index.html">Multilabel Classification</a>
</li>
                            
<li >
    <a href="../learning_curve/index.html">Learning Curves</a>
</li>
                            
<li >
    <a href="../partial_dependence/index.html">Partial Dependence Plots</a>
</li>
                            
<li >
    <a href="../classifier_calibration/index.html">Classifier Calibration Plots</a>
</li>
                            
<li >
    <a href="../hyperpar_tuning_effects/index.html">Hyperparameter Tuning Effects</a>
</li>
                            
<li >
    <a href="../out_of_bag_predictions/index.html">Out-of-Bag Predictions</a>
</li>
                            
<li >
    <a href="../handling_of_spatial_data/index.html">Handling of Spatial Data</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Extending <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../create_learner/index.html">Create Custom Learners</a>
</li>
                            
<li >
    <a href="../create_measure/index.html">Create Custom Measures</a>
</li>
                            
<li >
    <a href="../create_imputation/index.html">Create Imputation Methods</a>
</li>
                            
<li >
    <a href="../create_filter/index.html">Create Custom Filters</a>
</li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Appendix <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../example_tasks/index.html">Example Tasks</a>
</li>
                            
<li >
    <a href="../integrated_learners/index.html">Integrated Learners</a>
</li>
                            
<li >
    <a href="../measures/index.html">Implemented Performance Measures</a>
</li>
                            
<li >
    <a href="../filter_methods/index.html">Integrated Filter Methods</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../parallelization/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../configureMlr/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/mlr-org/mlr/edit/master/docs/visualization.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#visualization">Visualization</a></li>
            <li><a href="#generation-and-plotting-functions">Generation and plotting functions</a></li>
            <li><a href="#available-generation-and-plotting-functions">Available generation and plotting functions</a></li>
            <li><a href="#complete-code-listing">Complete code listing</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="visualization">Visualization</h1>
<h2 id="generation-and-plotting-functions">Generation and plotting functions</h2>
<p><a href="http://www.rdocumentation.org/packages/mlr/">mlr</a>'s visualization capabilities rely on <em>generation functions</em> which generate data for
plots, and <em>plotting functions</em> which plot this output using either <a href="http://www.rdocumentation.org/packages/ggplot2/">ggplot2</a> or <a href="http://www.rdocumentation.org/packages/ggvis/">ggvis</a>
(the latter being currently experimental).</p>
<p>This separation allows users to easily make custom visualizations by
taking advantage of the generation functions. The only data transformation that is handled inside
plotting functions is reshaping. The reshaped data is also accessible by calling the plotting
functions and then extracting the data from the <a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggplot.html">ggplot</a> object.</p>
<p>The functions are named accordingly.</p>
<ul>
<li>Names of generation functions start with <code>generate</code> and are followed by a title-case description of
  their <code>FunctionPurpose</code>, followed by <code>Data</code>, i.e., <code>generateFunctionPurposeData</code>.
  These functions output objects of class <code>FunctionPurposeData</code>.</li>
<li>Plotting functions are prefixed by <code>plot</code> followed by their purpose, i.e., <code>plotFunctionPurpose</code>.</li>
<li><a href="http://www.rdocumentation.org/packages/ggvis/">ggvis</a> plotting functions have an additional suffix <code>GGVIS</code>, i.e., <code>plotFunctionPurposeGGVIS</code>.</li>
</ul>
<h3 id="some-examples">Some examples</h3>
<p>In the example below we create a plot of classifier performance as function of the decision
threshold for the binary classification problem <a href="http://www.rdocumentation.org/packages/mlr/functions/sonar.task.html">sonar.task</a>.
The generation function <a href="http://www.rdocumentation.org/packages/mlr/functions/generateThreshVsPerfData.html">generateThreshVsPerfData</a> creates an object of class
<a href="http://www.rdocumentation.org/packages/mlr/functions/generateThreshVsPerfData.html">ThreshVsPerfData</a> which contains the data for the plot in slot
<code>$data</code>.</p>
<pre><code class="r">lrn = makeLearner(&quot;classif.lda&quot;, predict.type = &quot;prob&quot;)
n = getTaskSize(sonar.task)
mod = train(lrn, task = sonar.task, subset = seq(1, n, by = 2))
pred = predict(mod, task = sonar.task, subset = seq(2, n, by = 2))
d = generateThreshVsPerfData(pred, measures = list(fpr, fnr, mmce))

class(d)
#&gt; [1] &quot;ThreshVsPerfData&quot;

head(d$data)
#&gt;         fpr       fnr      mmce  threshold
#&gt; 1 1.0000000 0.0000000 0.4615385 0.00000000
#&gt; 2 0.3541667 0.1964286 0.2692308 0.01010101
#&gt; 3 0.3333333 0.2321429 0.2788462 0.02020202
#&gt; 4 0.3333333 0.2321429 0.2788462 0.03030303
#&gt; 5 0.3333333 0.2321429 0.2788462 0.04040404
#&gt; 6 0.3125000 0.2321429 0.2692308 0.05050505
</code></pre>

<p>For plotting we can use the built-in <a href="http://www.rdocumentation.org/packages/mlr/">mlr</a> function <a href="http://www.rdocumentation.org/packages/mlr/functions/plotThreshVsPerf.html">plotThreshVsPerf</a>.</p>
<pre><code class="r">plotThreshVsPerf(d)
</code></pre>

<p><img alt="plot of chunk unnamed-chunk-2" src="../figure/visualization/unnamed-chunk-2-1.svg" /></p>
<p>Note that by default the <a href="http://www.rdocumentation.org/packages/mlr/functions/makeMeasure.html">Measure</a> <code>name</code>s are used to annotate the panels.</p>
<pre><code class="r">fpr$name
#&gt; [1] &quot;False positive rate&quot;

fpr$id
#&gt; [1] &quot;fpr&quot;
</code></pre>

<p>This does not only apply to <a href="http://www.rdocumentation.org/packages/mlr/functions/plotThreshVsPerf.html">plotThreshVsPerf</a>, but to other plot functions that
show performance measures as well, for example <a href="http://www.rdocumentation.org/packages/mlr/functions/plotLearningCurve.html">plotLearningCurve</a>.
You can use the <code>id</code>s instead of the names by setting <code>pretty.names = FALSE</code>.</p>
<h3 id="customizing-plots">Customizing plots</h3>
<p>As mentioned above it is easily possible to customize the built-in plots or making your
own visualizations from scratch based on the generated data.</p>
<p>What will probably come up most often is changing labels and annotations.
Generally, this can be done by manipulating the <a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggplot.html">ggplot</a> object,
in this example the object returned by <a href="http://www.rdocumentation.org/packages/mlr/functions/plotThreshVsPerf.html">plotThreshVsPerf</a>, using the usual <a href="http://www.rdocumentation.org/packages/ggplot2/">ggplot2</a>
functions like <a href="http://www.rdocumentation.org/packages/ggplot2/functions/labs.html">ylab</a> or <a href="http://www.rdocumentation.org/packages/ggplot2/functions/labeller.html">labeller</a>.
Moreover, you can change the underlying data, either <code>d$data</code> (resulting from
<a href="http://www.rdocumentation.org/packages/mlr/functions/generateThreshVsPerfData.html">generateThreshVsPerfData</a>) or the possibly reshaped data contained in the
<a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggplot.html">ggplot</a> object (resulting from <a href="http://www.rdocumentation.org/packages/mlr/functions/plotThreshVsPerf.html">plotThreshVsPerf</a>), most often by
renaming columns or factor levels.</p>
<p>Below are two examples of how to alter the axis and panel labels of the above plot.</p>
<p>Imagine you want to change the order of the panels and also are not satisfied with the
panel names, for example you find that "Mean misclassification error" is too long and you
prefer "Error rate" instead. Moreover, you want the error rate to be displayed first.</p>
<pre><code class="r">plt = plotThreshVsPerf(d, pretty.names = FALSE)

## Reshaped version of the underlying data d
head(plt$data)
#&gt;    threshold measure performance
#&gt; 1 0.00000000     fpr   1.0000000
#&gt; 2 0.01010101     fpr   0.3541667
#&gt; 3 0.02020202     fpr   0.3333333
#&gt; 4 0.03030303     fpr   0.3333333
#&gt; 5 0.04040404     fpr   0.3333333
#&gt; 6 0.05050505     fpr   0.3125000

levels(plt$data$measure)
#&gt; [1] &quot;fpr&quot;  &quot;fnr&quot;  &quot;mmce&quot;

## Rename and reorder factor levels
plt$data$measure = factor(plt$data$measure, levels = c(&quot;mmce&quot;, &quot;fpr&quot;, &quot;fnr&quot;),
  labels = c(&quot;Error rate&quot;, &quot;False positive rate&quot;, &quot;False negative rate&quot;))
plt = plt + xlab(&quot;Cutoff&quot;) + ylab(&quot;Performance&quot;)
plt
</code></pre>

<p><img alt="plot of chunk unnamed-chunk-4" src="../figure/visualization/unnamed-chunk-4-1.svg" /></p>
<p>Using the <a href="ggplot2::labeller">labeller</a> function requires calling
<a href="http://www.rdocumentation.org/packages/ggplot2/functions/facet_wrap.html">facet_wrap</a> (or <a href="http://www.rdocumentation.org/packages/ggplot2/functions/facet_grid.html">facet_grid</a>), which can be
useful if you want to change how the panels are positioned (number of rows and columns)
or influence the axis limits.</p>
<pre><code class="r">plt = plotThreshVsPerf(d, pretty.names = FALSE)

measure_names = c(
  fpr = &quot;False positive rate&quot;,
  fnr = &quot;False negative rate&quot;,
  mmce = &quot;Error rate&quot;
)
## Manipulate the measure names via the labeller function and
## arrange the panels in two columns and choose common axis limits for all panels
plt = plt + facet_wrap( ~ measure, labeller = labeller(measure = measure_names), ncol = 2)
plt = plt + xlab(&quot;Decision threshold&quot;) + ylab(&quot;Performance&quot;)
plt
</code></pre>

<p><img alt="plot of chunk unnamed-chunk-5" src="../figure/visualization/unnamed-chunk-5-1.svg" /></p>
<p>Instead of using the built-in function <a href="http://www.rdocumentation.org/packages/mlr/functions/plotThreshVsPerf.html">plotThreshVsPerf</a> we could also manually create
the plot based on the output of <a href="http://www.rdocumentation.org/packages/mlr/functions/generateThreshVsPerfData.html">generateThreshVsPerfData</a>: in this case to plot only one
measure.</p>
<pre><code class="r">ggplot(d$data, aes(threshold, fpr)) + geom_line()
</code></pre>

<p><img alt="plot of chunk unnamed-chunk-6" src="../figure/visualization/unnamed-chunk-6-1.svg" /></p>
<p>The decoupling of generation and plotting functions is especially practical if you
prefer traditional <a href="http://www.rdocumentation.org/packages/graphics/">graphics</a> or <a href="http://www.rdocumentation.org/packages/lattice/">lattice</a>. Here is a <a href="http://www.rdocumentation.org/packages/lattice/">lattice</a> plot which gives a
result similar to that of <a href="http://www.rdocumentation.org/packages/mlr/functions/plotThreshVsPerf.html">plotThreshVsPerf</a>.</p>
<pre><code class="r">lattice::xyplot(fpr + fnr + mmce ~ threshold, data = d$data, type = &quot;l&quot;, ylab = &quot;performance&quot;,
  outer = TRUE, scales = list(relation = &quot;free&quot;),
  strip = strip.custom(factor.levels = sapply(d$measures, function(x) x$name),
    par.strip.text = list(cex = 0.8)))
</code></pre>

<p><img alt="plot of chunk unnamed-chunk-7" src="../figure/visualization/unnamed-chunk-7-1.svg" /></p>
<p>Let's conclude with a brief look on a second example.
Here we use <a href="http://www.rdocumentation.org/packages/mlr/functions/plotPartialDependence.html">plotPartialDependence</a> but extract the data from the <a href="http://www.rdocumentation.org/packages/ggplot2/functions/ggplot.html">ggplot</a>
object <code>plt</code>and use it to create a traditional <a href="http://www.rdocumentation.org/packages/graphics/functions/plot.html">graphics::plot</a>, additional to the <a href="http://www.rdocumentation.org/packages/ggplot2/">ggplot2</a>
plot.</p>
<pre><code class="r">sonar = getTaskData(sonar.task)
pd = generatePartialDependenceData(mod, sonar, &quot;V11&quot;)
plt = plotPartialDependence(pd)
head(plt$data)
#&gt;           M Feature     Value
#&gt; 1 0.2737158     V11 0.0289000
#&gt; 2 0.3689970     V11 0.1072667
#&gt; 3 0.4765742     V11 0.1856333
#&gt; 4 0.5741233     V11 0.2640000
#&gt; 5 0.6557857     V11 0.3423667
#&gt; 6 0.7387962     V11 0.4207333

# plt # FIXME
</code></pre>

<pre><code class="r">plot(M ~ Value, data = plt$data, type = &quot;b&quot;, xlab = plt$data$Feature[1])
</code></pre>

<p><img alt="plot of chunk unnamed-chunk-9" src="../figure/visualization/unnamed-chunk-9-1.svg" /></p>
<h2 id="available-generation-and-plotting-functions">Available generation and plotting functions</h2>
<p>Below the currently available generation and plotting functions are listed and tutorial
pages that provide in depth descriptions of the listed functions are referenced.</p>
<p>Note that some plots, e.g., <a href="http://www.rdocumentation.org/packages/mlr/functions/plotTuneMultiCritResult.html">plotTuneMultiCritResult</a> are not mentioned here since they lack
a generation function.
Both <a href="http://www.rdocumentation.org/packages/mlr/functions/plotThreshVsPerf.html">plotThreshVsPerf</a> and <a href="http://www.rdocumentation.org/packages/mlr/functions/plotROCCurves.html">plotROCCurves</a> operate on the result of <a href="http://www.rdocumentation.org/packages/mlr/functions/generateThreshVsPerfData.html">generateThreshVsPerfData</a>.
Functions <a href="http://www.rdocumentation.org/packages/mlr/functions/plotPartialDependence.html">plotPartialDependence</a> and <a href="http://www.rdocumentation.org/packages/mlr/functions/plotPartialDependenceGGVIS.html">plotPartialDependenceGGVIS</a> can be applied to the
results of both <a href="http://www.rdocumentation.org/packages/mlr/functions/generatePartialDependenceData.html">generatePartialDependenceData</a> and <a href="http://www.rdocumentation.org/packages/mlr/functions/generateFunctionalANOVAData.html">generateFunctionalANOVAData</a>.</p>
<p>The <a href="http://www.rdocumentation.org/packages/ggvis/">ggvis</a> functions are experimental and are subject to change, though they should work.
Most generate interactive <a href="http://www.rdocumentation.org/packages/shiny/">shiny</a> applications, that automatically start and run locally.</p>
<table>
<thead>
<tr>
<th>generation function</th>
<th>ggplot2 plotting function</th>
<th>ggvis plotting function</th>
<th>tutorial pages</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/generateThreshVsPerfData.html">generateThreshVsPerfData</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotThresVsPerf.html">plotThresVsPerf</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotThreshVsPerfGGVIS.html">plotThreshVsPerfGGVIS</a></td>
<td><a href="../performance/index.html">Performance</a></td>
</tr>
<tr>
<td></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotROCCurves.html">plotROCCurves</a></td>
<td>--</td>
<td><a href="../roc_analysis/index.html">ROC Analysis</a></td>
</tr>
<tr>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/generateCritDifferencesData.html">generateCritDifferencesData</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotCritDifferences.html">plotCritDifferences</a></td>
<td>--</td>
<td><a href="../benchmark_experiments/index.html">Benchmark Experiments</a></td>
</tr>
<tr>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/generateHyperParsEffectData.html">generateHyperParsEffectData</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotHyperParsEffect.html">plotHyperParsEffect</a></td>
<td></td>
<td><a href="../tune/index.html">Tuning</a>, <a href="../hyperpar_tuning_effects/index.html">Hyperparameter Tuning Effects</a></td>
</tr>
<tr>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/generateFilterValuesData.html">generateFilterValuesData</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotFilterValues.html">plotFilterValues</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotFilterValuesGGVIS.html">plotFilterValuesGGVIS</a></td>
<td><a href="../feature_selection/index.html">Feature Selection</a></td>
</tr>
<tr>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/generateLearningCurveData.html">generateLearningCurveData</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotLearningCurve.html">plotLearningCurve</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotLearningCurveGGVIS.html">plotLearningCurveGGVIS</a></td>
<td><a href="../learning_curve/index.html">Learning Curves</a></td>
</tr>
<tr>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/generatePartialDependenceData.html">generatePartialDependenceData</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotPartialDependence.html">plotPartialDependence</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotPartialDependenceGGVIS.html">plotPartialDependenceGGVIS</a></td>
<td><a href="../partial_dependence/index.html">Partial Dependence Plots</a></td>
</tr>
<tr>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/generateFunctionalANOVAData.html">generateFunctionalANOVAData</a></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/generateCalibrationData.html">generateCalibrationData</a></td>
<td><a href="http://www.rdocumentation.org/packages/mlr/functions/plotCalibration.html">plotCalibration</a></td>
<td>--</td>
<td><a href="../classifier_calibration/index.html">Classifier Calibration Plots</a></td>
</tr>
</tbody>
</table>
<h2 id="complete-code-listing">Complete code listing</h2>
<p>The above code without the output is given below:</p>
<pre><code>params &lt;- 
structure(list(run.for.each.dev = TRUE), .Names = &quot;run.for.each.dev&quot;) 

lrn = makeLearner(&quot;classif.lda&quot;, predict.type = &quot;prob&quot;) 
n = getTaskSize(sonar.task) 
mod = train(lrn, task = sonar.task, subset = seq(1, n, by = 2)) 
pred = predict(mod, task = sonar.task, subset = seq(2, n, by = 2)) 
d = generateThreshVsPerfData(pred, measures = list(fpr, fnr, mmce)) 

class(d) 

head(d$data) 
plotThreshVsPerf(d) 
fpr$name 

fpr$id 
plt = plotThreshVsPerf(d, pretty.names = FALSE) 

## Reshaped version of the underlying data d 
head(plt$data) 

levels(plt$data$measure) 

## Rename and reorder factor levels 
plt$data$measure = factor(plt$data$measure, levels = c(&quot;mmce&quot;, &quot;fpr&quot;, &quot;fnr&quot;), 
  labels = c(&quot;Error rate&quot;, &quot;False positive rate&quot;, &quot;False negative rate&quot;)) 
plt = plt + xlab(&quot;Cutoff&quot;) + ylab(&quot;Performance&quot;) 
plt 
plt = plotThreshVsPerf(d, pretty.names = FALSE) 

measure_names = c( 
  fpr = &quot;False positive rate&quot;, 
  fnr = &quot;False negative rate&quot;, 
  mmce = &quot;Error rate&quot; 
) 
## Manipulate the measure names via the labeller function and 
## arrange the panels in two columns and choose common axis limits for all panels 
plt = plt + facet_wrap( ~ measure, labeller = labeller(measure = measure_names), ncol = 2) 
plt = plt + xlab(&quot;Decision threshold&quot;) + ylab(&quot;Performance&quot;) 
plt 
ggplot(d$data, aes(threshold, fpr)) + geom_line() 
lattice::xyplot(fpr + fnr + mmce ~ threshold, data = d$data, type = &quot;l&quot;, ylab = &quot;performance&quot;, 
  outer = TRUE, scales = list(relation = &quot;free&quot;), 
  strip = strip.custom(factor.levels = sapply(d$measures, function(x) x$name), 
    par.strip.text = list(cex = 0.8))) 
sonar = getTaskData(sonar.task) 
pd = generatePartialDependenceData(mod, sonar, &quot;V11&quot;) 
plt = plotPartialDependence(pd) 
head(plt$data) 

# plt # FIXME 
plot(M ~ Value, data = plt$data, type = &quot;b&quot;, xlab = plt$data$Feature[1])
</code></pre></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
